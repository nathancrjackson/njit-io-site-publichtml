/*!***************************************************
* mark.js v9.0.0
* https://markjs.io/
* Copyright (c) 2014–2018, Julian Kühnel
* Released under the MIT license https://git.io/vwTVl
*****************************************************/(function(e,t){typeof exports=="object"&&typeof module!="undefined"?module.exports=t():typeof define=="function"&&define.amd?define(t):e.Mark=t()})(this,function(){"use strict";class e{constructor(e,t=!0,n=[],s=5e3){this.ctx=e,this.iframes=t,this.exclude=n,this.iframesTimeout=s}static matches(e,t){const s=typeof t=="string"?[t]:t,n=e.matches||e.matchesSelector||e.msMatchesSelector||e.mozMatchesSelector||e.oMatchesSelector||e.webkitMatchesSelector;if(n){let t=!1;return s.every(s=>!n.call(e,s)||(t=!0,!1)),t}return!1}getContexts(){let e,t=[];return typeof this.ctx=="undefined"||!this.ctx?e=[]:NodeList.prototype.isPrototypeOf(this.ctx)?e=Array.prototype.slice.call(this.ctx):Array.isArray(this.ctx)?e=this.ctx:typeof this.ctx=="string"?e=Array.prototype.slice.call(document.querySelectorAll(this.ctx)):e=[this.ctx],e.forEach(e=>{const n=t.filter(t=>t.contains(e)).length>0;t.indexOf(e)===-1&&!n&&t.push(e)}),t}getIframeContents(e,t,n=()=>{}){let s;try{const t=e.contentWindow;if(s=t.document,!t||!s)throw new Error("iframe inaccessible")}catch{n()}s&&t(s)}isIframeBlank(e){const t="about:blank",n=e.getAttribute("src").trim(),s=e.contentWindow.location.href;return s===t&&n!==t&&n}observeIframeLoad(e,t,n){let o=!1,i=null;const s=()=>{if(o)return;o=!0,clearTimeout(i);try{this.isIframeBlank(e)||(e.removeEventListener("load",s),this.getIframeContents(e,t,n))}catch{n()}};e.addEventListener("load",s),i=setTimeout(s,this.iframesTimeout)}onIframeReady(e,t,n){try{e.contentWindow.document.readyState==="complete"?this.isIframeBlank(e)?this.observeIframeLoad(e,t,n):this.getIframeContents(e,t,n):this.observeIframeLoad(e,t,n)}catch{n()}}waitForIframes(e,t){let n=0;this.forEachIframe(e,()=>!0,e=>{n++,this.waitForIframes(e.querySelector("html"),()=>{--n||t()})},e=>{e||t()})}forEachIframe(t,n,s,o=()=>{}){let i=t.querySelectorAll("iframe"),r=i.length,c=0;i=Array.prototype.slice.call(i);const a=()=>{--r<=0&&o(c)};r||a(),i.forEach(t=>{e.matches(t,this.exclude)?a():this.onIframeReady(t,e=>{n(t)&&(c++,s(e)),a()},a)})}createIterator(e,t,n){return document.createNodeIterator(e,t,n,!1)}createInstanceOnIframe(t){return new e(t.querySelector("html"),this.iframes)}compareNodeIframe(e,t,n){const s=e.compareDocumentPosition(n),o=Node.DOCUMENT_POSITION_PRECEDING;if(s&o)if(t!==null){{const e=t.compareDocumentPosition(n),s=Node.DOCUMENT_POSITION_FOLLOWING;if(e&s)return!0}}else return!0;return!1}getIteratorNode(e){const n=e.previousNode();let t;return n===null?t=e.nextNode():t=e.nextNode()&&e.nextNode(),{prevNode:n,node:t}}checkIframeFilter(e,t,n,s){let o=!1,i=!1;return s.forEach((e,t)=>{e.val===n&&(o=t,i=e.handled)}),this.compareNodeIframe(e,t,n)?(o===!1&&!i?s.push({val:n,handled:!0}):o!==!1&&!i&&(s[o].handled=!0),!0):(o===!1&&s.push({val:n,handled:!1}),!1)}handleOpenIframes(e,t,n,s){e.forEach(e=>{e.handled||this.getIframeContents(e.val,e=>{this.createInstanceOnIframe(e).forEachNode(t,n,s)})})}iterateThroughNodes(e,t,n,s,o){const l=this.createIterator(t,e,s);let r=[],a=[],i,c,d=()=>({prevNode:c,node:i}=this.getIteratorNode(l),i);for(;d();)this.iframes&&this.forEachIframe(t,e=>this.checkIframeFilter(i,c,e,r),t=>{this.createInstanceOnIframe(t).forEachNode(e,e=>a.push(e),s)}),a.push(i);a.forEach(e=>{n(e)}),this.iframes&&this.handleOpenIframes(r,e,n,s),o()}forEachNode(e,t,n,s=()=>{}){const o=this.getContexts();let i=o.length;i||s(),o.forEach(o=>{const a=()=>{this.iterateThroughNodes(e,o,t,n,()=>{--i<=0&&s()})};this.iframes?this.waitForIframes(o,a):a()})}}class t{constructor(e){this.opt=Object.assign({},{diacritics:!0,synonyms:{},accuracy:"partially",caseSensitive:!1,ignoreJoiners:!1,ignorePunctuation:[],wildcards:"disabled"},e)}create(e){return this.opt.wildcards!=="disabled"&&(e=this.setupWildcardsRegExp(e)),e=this.escapeStr(e),Object.keys(this.opt.synonyms).length&&(e=this.createSynonymsRegExp(e)),(this.opt.ignoreJoiners||this.opt.ignorePunctuation.length)&&(e=this.setupIgnoreJoinersRegExp(e)),this.opt.diacritics&&(e=this.createDiacriticsRegExp(e)),e=this.createMergedBlanksRegExp(e),(this.opt.ignoreJoiners||this.opt.ignorePunctuation.length)&&(e=this.createJoinersRegExp(e)),this.opt.wildcards!=="disabled"&&(e=this.createWildcardsRegExp(e)),e=this.createAccuracyRegExp(e),new RegExp(e,`gm${this.opt.caseSensitive?"":"i"}`)}sortByLength(e){return e.sort((e,t)=>e.length===t.length?e>t?1:-1:t.length-e.length)}escapeStr(e){return e.replace(/[-[\]/{}()*+?.\\^$|]/g,"\\$&")}createSynonymsRegExp(e){const t=this.opt.synonyms,s=this.opt.caseSensitive?"":"i",n=this.opt.ignoreJoiners||this.opt.ignorePunctuation.length?"\x00":"";for(let o in t)if(t.hasOwnProperty(o)){let i=Array.isArray(t[o])?t[o]:[t[o]];i.unshift(o),i=this.sortByLength(i).map(e=>(this.opt.wildcards!=="disabled"&&(e=this.setupWildcardsRegExp(e)),e=this.escapeStr(e),e)).filter(e=>e!==""),i.length>1&&(e=e.replace(new RegExp(`(${i.map(e=>this.escapeStr(e)).join("|")})`,`gm${s}`),n+`(${i.map(e=>this.processSynonyms(e)).join("|")})`+n))}return e}processSynonyms(e){return(this.opt.ignoreJoiners||this.opt.ignorePunctuation.length)&&(e=this.setupIgnoreJoinersRegExp(e)),e}setupWildcardsRegExp(e){return e=e.replace(/(?:\\)*\?/g,e=>e.charAt(0)==="\\"?"?":""),e.replace(/(?:\\)*\*/g,e=>e.charAt(0)==="\\"?"*":"")}createWildcardsRegExp(e){let t=this.opt.wildcards==="withSpaces";return e.replace(/\u0001/g,t?"[\\S\\s]?":"\\S?").replace(/\u0002/g,t?"[\\S\\s]*?":"\\S*")}setupIgnoreJoinersRegExp(e){return e.replace(/[^(|)\\]/g,(e,t,n)=>{let s=n.charAt(t+1);return/[(|)\\]/.test(s)||s===""?e:e+"\x00"})}createJoinersRegExp(e){let t=[];const n=this.opt.ignorePunctuation;return Array.isArray(n)&&n.length&&t.push(this.escapeStr(n.join(""))),this.opt.ignoreJoiners&&t.push("\\u00ad\\u200b\\u200c\\u200d"),t.length?e.split(/\u0000+/).join(`[${t.join("")}]*`):e}createDiacriticsRegExp(e){const n=this.opt.caseSensitive?"":"i",s=this.opt.caseSensitive?["aàáảãạăằắẳẵặâầấẩẫậäåāą","AÀÁẢÃẠĂẰẮẲẴẶÂẦẤẨẪẬÄÅĀĄ","cçćč","CÇĆČ","dđď","DĐĎ","eèéẻẽẹêềếểễệëěēę","EÈÉẺẼẸÊỀẾỂỄỆËĚĒĘ","iìíỉĩịîïī","IÌÍỈĨỊÎÏĪ","lł","LŁ","nñňń","NÑŇŃ","oòóỏõọôồốổỗộơởỡớờợöøō","OÒÓỎÕỌÔỒỐỔỖỘƠỞỠỚỜỢÖØŌ","rř","RŘ","sšśșş","SŠŚȘŞ","tťțţ","TŤȚŢ","uùúủũụưừứửữựûüůū","UÙÚỦŨỤƯỪỨỬỮỰÛÜŮŪ","yýỳỷỹỵÿ","YÝỲỶỸỴŸ","zžżź","ZŽŻŹ"]:["aàáảãạăằắẳẵặâầấẩẫậäåāąAÀÁẢÃẠĂẰẮẲẴẶÂẦẤẨẪẬÄÅĀĄ","cçćčCÇĆČ","dđďDĐĎ","eèéẻẽẹêềếểễệëěēęEÈÉẺẼẸÊỀẾỂỄỆËĚĒĘ","iìíỉĩịîïīIÌÍỈĨỊÎÏĪ","lłLŁ","nñňńNÑŇŃ","oòóỏõọôồốổỗộơởỡớờợöøōOÒÓỎÕỌÔỒỐỔỖỘƠỞỠỚỜỢÖØŌ","rřRŘ","sšśșşSŠŚȘŞ","tťțţTŤȚŢ","uùúủũụưừứửữựûüůūUÙÚỦŨỤƯỪỨỬỮỰÛÜŮŪ","yýỳỷỹỵÿYÝỲỶỸỴŸ","zžżźZŽŻŹ"];let t=[];return e.split("").forEach(o=>{s.every(s=>{if(s.indexOf(o)!==-1){if(t.indexOf(s)>-1)return!1;e=e.replace(new RegExp(`[${s}]`,`gm${n}`),`[${s}]`),t.push(s)}return!0})}),e}createMergedBlanksRegExp(e){return e.replace(/[\s]+/gmi,"[\\s]+")}createAccuracyRegExp(e){const s="!\"#$%&'()*+,-./:;<=>?@[\\]^_`{|}~¡¿";let n=this.opt.accuracy,o=typeof n=="string"?n:n.value,i=typeof n=="string"?[]:n.limiters,t="";switch(i.forEach(e=>{t+=`|${this.escapeStr(e)}`}),o){case"partially":default:return`()(${e})`;case"complementary":return t="\\s"+(t||this.escapeStr(s)),`()([^${t}]*${e}[^${t}]*)`;case"exactly":return`(^|\\s${t})(${e})(?=$|\\s${t})`}}}class n{constructor(e){this.ctx=e,this.ie=!1;const t=window.navigator.userAgent;(t.indexOf("MSIE")>-1||t.indexOf("Trident")>-1)&&(this.ie=!0)}set opt(e){this._opt=Object.assign({},{element:"",className:"",exclude:[],iframes:!1,iframesTimeout:5e3,separateWordSearch:!0,acrossElements:!1,ignoreGroups:0,each:()=>{},noMatch:()=>{},filter:()=>!0,done:()=>{},debug:!1,log:window.console},e)}get opt(){return this._opt}get iterator(){return new e(this.ctx,this.opt.iframes,this.opt.exclude,this.opt.iframesTimeout)}log(e,t="debug"){const n=this.opt.log;if(!this.opt.debug)return;typeof n=="object"&&typeof n[t]=="function"&&n[t](`mark.js: ${e}`)}getSeparatedKeywords(e){let t=[];return e.forEach(e=>{this.opt.separateWordSearch?e.split(" ").forEach(e=>{e.trim()&&t.indexOf(e)===-1&&t.push(e)}):e.trim()&&t.indexOf(e)===-1&&t.push(e)}),{keywords:t.sort((e,t)=>t.length-e.length),length:t.length}}isNumeric(e){return Number(parseFloat(e))==e}checkRanges(e){if(!Array.isArray(e)||Object.prototype.toString.call(e[0])!=="[object Object]")return this.log("markRanges() will only accept an array of objects"),this.opt.noMatch(e),[];const t=[];let n=0;return e.sort((e,t)=>e.start-t.start).forEach(e=>{let{start:s,end:o,valid:i}=this.callNoMatchOnInvalidRanges(e,n);i&&(e.start=s,e.length=o-s,t.push(e),n=o)}),t}callNoMatchOnInvalidRanges(e,t){let n,s,o=!1;return e&&typeof e.start!="undefined"?(n=parseInt(e.start,10),s=n+parseInt(e.length,10),this.isNumeric(e.start)&&this.isNumeric(e.length)&&s-t>0&&s-n>0?o=!0:(this.log("Ignoring invalid or overlapping range: "+`${JSON.stringify(e)}`),this.opt.noMatch(e))):(this.log(`Ignoring invalid range: ${JSON.stringify(e)}`),this.opt.noMatch(e)),{start:n,end:s,valid:o}}checkWhitespaceRanges(e,t,n){let i,a=!0,o=n.length,r=t-o,s=parseInt(e.start,10)-r;return s=s>o?o:s,i=s+parseInt(e.length,10),i>o&&(i=o,this.log(`End range automatically set to the max value of ${o}`)),s<0||i-s<0||s>o||i>o?(a=!1,this.log(`Invalid range: ${JSON.stringify(e)}`),this.opt.noMatch(e)):n.substring(s,i).replace(/\s+/g,"")===""&&(a=!1,this.log("Skipping whitespace only range: "+JSON.stringify(e)),this.opt.noMatch(e)),{start:s,end:i,valid:a}}getTextNodes(e){let t="",n=[];this.iterator.forEachNode(NodeFilter.SHOW_TEXT,e=>{n.push({start:t.length,end:(t+=e.textContent).length,node:e})},e=>this.matchesExclude(e.parentNode)?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_ACCEPT,()=>{e({value:t,nodes:n})})}matchesExclude(t){return e.matches(t,this.opt.exclude.concat(["script","style","title","head","html"]))}wrapRangeInTextNode(e,t,n){const i=this.opt.element?this.opt.element:"mark",s=e.splitText(t),a=s.splitText(n-t);let o=document.createElement(i);return o.setAttribute("data-markjs","true"),this.opt.className&&o.setAttribute("class",this.opt.className),o.textContent=s.textContent,s.parentNode.replaceChild(o,s),a}wrapRangeInMappedTextNode(e,t,n,s,o){e.nodes.every((i,a)=>{const r=e.nodes[a+1];if(typeof r=="undefined"||r.start>t){if(!s(i.node))return!1;const c=t-i.start,r=(n>i.end?i.end:n)-i.start,l=e.value.substr(0,i.start),d=e.value.substr(r+i.start);if(i.node=this.wrapRangeInTextNode(i.node,c,r),e.value=l+d,e.nodes.forEach((t,n)=>{n>=a&&(e.nodes[n].start>0&&n!==a&&(e.nodes[n].start-=r),e.nodes[n].end-=r)}),n-=r,o(i.node.previousSibling,i.start),n>i.end)t=i.end;else return!1}return!0})}wrapGroups(e,t,n,s){return e=this.wrapRangeInTextNode(e,t,t+n),s(e.previousSibling),e}separateGroups(e,t,n,s,o){let i=t.length;for(let n=1;n<i;n++){let a=e.textContent.indexOf(t[n]);t[n]&&a>-1&&s(t[n],e)&&(e=this.wrapGroups(e,a,t[n].length,o))}return e}wrapMatches(e,t,n,s,o){const i=t===0?0:t+1;this.getTextNodes(t=>{t.nodes.forEach(t=>{t=t.node;let o;for(;(o=e.exec(t.textContent))!==null&&o[i]!=="";){if(this.opt.separateGroups)t=this.separateGroups(t,o,i,n,s);else{if(!n(o[i],t))continue;let e=o.index;if(i!==0)for(let t=1;t<i;t++)e+=o[t].length;t=this.wrapGroups(t,e,o[i].length,s)}e.lastIndex=0}}),o()})}wrapMatchesAcrossElements(e,t,n,s,o){const i=t===0?0:t+1;this.getTextNodes(t=>{let a;for(;(a=e.exec(t.value))!==null&&a[i]!=="";){let o=a.index;if(i!==0)for(let e=1;e<i;e++)o+=a[e].length;const r=o+a[i].length;this.wrapRangeInMappedTextNode(t,o,r,e=>n(a[i],e),(t,n)=>{e.lastIndex=n,s(t)})}o()})}wrapRangeFromIndex(e,t,n,s){this.getTextNodes(o=>{const i=o.value.length;e.forEach((e,s)=>{let{start:a,end:r,valid:c}=this.checkWhitespaceRanges(e,i,o.value);c&&this.wrapRangeInMappedTextNode(o,a,r,n=>t(n,e,o.value.substring(a,r),s),t=>{n(t,e)})}),s()})}unwrapMatches(e){const t=e.parentNode;let n=document.createDocumentFragment();for(;e.firstChild;)n.appendChild(e.removeChild(e.firstChild));t.replaceChild(n,e),this.ie?this.normalizeTextNode(t):t.normalize()}normalizeTextNode(e){if(!e)return;if(e.nodeType===3)for(;e.nextSibling&&e.nextSibling.nodeType===3;)e.nodeValue+=e.nextSibling.nodeValue,e.parentNode.removeChild(e.nextSibling);else this.normalizeTextNode(e.firstChild);this.normalizeTextNode(e.nextSibling)}markRegExp(e,t){this.opt=t,this.log(`Searching with expression "${e}"`);let n=0,s="wrapMatches";const o=e=>{n++,this.opt.each(e)};this.opt.acrossElements&&(s="wrapMatchesAcrossElements"),this[s](e,this.opt.ignoreGroups,(e,t)=>this.opt.filter(t,e,n),o,()=>{n===0&&this.opt.noMatch(e),this.opt.done(n)})}mark(e,n){this.opt=n;let s=0,i="wrapMatches";const{keywords:o,length:a}=this.getSeparatedKeywords(typeof e=="string"?[e]:e),r=e=>{const c=new t(this.opt).create(e);let n=0;this.log(`Searching with expression "${c}"`),this[i](c,1,(t,o)=>this.opt.filter(o,e,s,n),e=>{n++,s++,this.opt.each(e)},()=>{n===0&&this.opt.noMatch(e),o[a-1]===e?this.opt.done(s):r(o[o.indexOf(e)+1])})};this.opt.acrossElements&&(i="wrapMatchesAcrossElements"),a===0?this.opt.done(s):r(o[0])}markRanges(e,t){this.opt=t;let s=0,n=this.checkRanges(e);n&&n.length?(this.log("Starting to mark with the following ranges: "+JSON.stringify(n)),this.wrapRangeFromIndex(n,(e,t,n,s)=>this.opt.filter(e,t,n,s),(e,t)=>{s++,this.opt.each(e,t)},()=>{this.opt.done(s)})):this.opt.done(s)}unmark(t){this.opt=t;let n=this.opt.element?this.opt.element:"*";n+="[data-markjs]",this.opt.className&&(n+=`.${this.opt.className}`),this.log(`Removal selector "${n}"`),this.iterator.forEachNode(NodeFilter.SHOW_ELEMENT,e=>{this.unwrapMatches(e)},t=>{const s=e.matches(t,n),o=this.matchesExclude(t);return!s||o?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_ACCEPT},this.opt.done)}}function s(e){const t=new n(e);return this.mark=(e,n)=>(t.mark(e,n),this),this.markRegExp=(e,n)=>(t.markRegExp(e,n),this),this.markRanges=(e,n)=>(t.markRanges(e,n),this),this.unmark=e=>(t.unmark(e),this),this}return s})