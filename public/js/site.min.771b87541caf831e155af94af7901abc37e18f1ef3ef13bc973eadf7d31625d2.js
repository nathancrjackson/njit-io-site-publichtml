function Snips(){this.array=[],this.variables={},this.variableOrder=[],this.functions={},this.variablesButtonID="fill-in-variables-button",this.main=function(){if(njt.snip.initByClass(app.codeClass),app.snips.array=njt.snip.examineByGroup(app.codeClass),this.array.length>0){let n={t:"njt/form",c:"gd-cont",e:[{t:"div",c:"gd-s12",e:[{t:"h2",i:app.codeClass+"-form-heading",c:null,a:{},h:"Fill in variables"},{t:"p",h:"Please note that this form does not validate input so use at your own risk. Clicking update without entering data will populate with placeholder information where possible."}]}]},s=app.snips.generateFormArray();for(let e=0;e<s.length;e++)n.e.push(s[e]);n.e.push({t:"div",c:"gd-s12",e:[{t:"button",i:app.codeClass+"-update-button",a:{type:"button"},c:"adjust-button",h:"Update"},{t:"",h:" "},{t:"button",i:app.codeClass+"-reset-button",a:{type:"button"},c:"adjust-button",h:"Reset"}]});let t=document.createDocumentFragment();t.appendChild(njt.formbuilder.generate(n)),t.getElementById(app.codeClass+"-update-button").onclick=function(){app.snips.loadInputValues(),njt.snip.processByGroup(app.codeClass),njt.modal.closeNow(app.codeClass+"-modal")}.bind(app.codeClass),t.getElementById(app.codeClass+"-reset-button").onclick=function(){njt.snip.resetByGroup(app.codeClass),njt.modal.closeNow(app.codeClass+"-modal")}.bind(app.codeClass);let e=app.codeClass+"-modal";njt.modal.contentArray[e]={},njt.modal.contentArray[e].modal=t,njt.modal.contentArray[e].open=null,njt.modal.contentArray[e].open=null;let o="fill-in-variables-button",i={t:"div",i:"bottom-sticky-button-wrapper",e:[{t:"button",i:o,c:"adjust-button",h:"Fill in variables"}]},a=njt.element.buildElementTree(i),r=document.getElementById("content-grid");r.appendChild(a),button=document.getElementById(o),button.onclick=function(){njt.modal.openNow(e)}.bind(e)}},this.generateFormArray=function(){let e=[],t=this.variableOrder.length;for(let n=0;n<t;n++){let o=this.variableOrder[n],s=this.generateFormElement(o);s!==null&&e.push(s)}t=this.array.length;for(let n=0;n<t;n++){let s=this.array[n];if(!this.variableOrder.includes(s)){let t=this.generateFormElement(s);t!==null&&e.push(t)}}return e},this.generateFormElement=function(e){let t=null,n={t:"njt/form/input",i:e,c:"gd-m6",l:"Set {:"+e+":}",p:""};if(njt.js.typeOf(this.variables)==njt.types.OBJECT&&(njt.js.typeOf(this.variables[e])==njt.types.OBJECT?t=this.variables[e]:njt.js.typeOf(this.variables[e.toLowerCase()])==njt.types.OBJECT&&(t=this.variables[e.toLowerCase()])),njt.js.typeOf(njt.snip.valueMap[e])!==njt.types.UNDEFINED?njt.snip.valueMap[e]!=""&&(n.v=njt.snip.valueMap[e]):t!==null&&njt.js.typeOf(t.v)==njt.types.STRING&&(n.v=t.v),t!==null){if(njt.js.typeOf(t.h)==njt.types.STRING&&(n.l=t.h),njt.js.typeOf(t.c)==njt.types.STRING&&(n.c=t.c),njt.js.typeOf(t.p)!==njt.types.UNDEFINED&&(n.p=t.p),t.i==0)return null;t.i==2?(n.t="njt/form/datalist",n.o=t.a):t.i==3?(n.t="njt/form/select",n.o=t.a):njt.js.typeOf(t.r)==njt.types.NUMBER&&t.r>0&&(n.t="njt/form/textarea",n.r=t.r)}return n},this.applyFunction=function(e,t){if(app.snips.variables[e]!=null&&njt.js.typeOf(app.snips.variables[e].f)==njt.types.ARRAY){let n=app.snips.variables[e].f;for(let e=0;e<n.length;e++)t=app.snips.functions[n[e]](t)}return t},this.addVariable=function(e,t){this.variables[e]=t,this.variableOrder.push(e)},this.loadInputValues=function(){njt.snip.valueMapClear();for(let e=0;e<app.snips.array.length;e++){let t="",n=document.getElementById(app.snips.array[e]+"-input");n!==null&&(n.value!==""?t=n.value:n.placeholder!==""&&(t=n.placeholder),t=app.snips.applyFunction(app.snips.array[e],t),njt.snip.valueMapPush(app.snips.array[e],t))}for(let e in app.snips.variables){let t=app.snips.variables[e];if(t.i==0&&njt.js.typeOf(t.s)==njt.types.STRING){let n=njt.snip.valueMap[t.s];njt.snip.valueMapPush(e,app.snips.applyFunction(e,n))}}},this.getPasswordForPosts=function(){return pwdgen.generatePasswords().mediumsecurity}}function CodeBlocks(){this.process=function(e){let t=document.getElementsByClassName(e);for(let s of t){s.childNodes[0].childNodes[0].classList.add(app.codeClass);let i="block-"+njt.id.getLazyUniqueId();s.childNodes[0].childNodes[0].setAttribute("copy-id",i);let n=document.createElement("button");n.setAttribute("copy-target",i),n.innerHTML="Copy",n.onclick=app.codeBlocks.copyToClipboard;let o=document.createElement("div");o.classList.add(e+"-copy"),o.appendChild(n),s.insertAdjacentElement("afterbegin",o)}},this.copyToClipboard=function(e){let t="",s=e.srcElement,o=s.attributes["copy-target"].value,i=njt.dom.getElementsByAttributeWithValue("copy-id",o)[0];for(let e of i.childNodes)t===""?t=e.innerText:t=t+e.innerText;t=t.trimEnd(`
`);let n=document.createElement("textarea");n.value=t,s.appendChild(n),n.select(),n.setSelectionRange(0,n.value.length),document.execCommand("copy"),s.removeChild(n),app.tempChangeInnerHTML(s,"Copied")}}function NJITApp(){this.secretPattern=["ArrowUp","ArrowUp","ArrowDown","ArrowDown","ArrowLeft","ArrowRight","ArrowLeft","ArrowRight","b","a"],this.patternCount=0,this.detectedIE=!1,this.writingTimer,this.writingWaitTime=500,this.writingDoneFunction=function(){njt.log("No function defined for writing timer")},this.codeParentClass="highlight",this.codeClass="njit-code-block",this.snips=null,this.codeBlocks=null,this.main=function(){njt.log("Initialising NJITApp"),navigator.userAgent.indexOf("MSIE ")>0||!!navigator.userAgent.match(/Trident.*rv:11\./)?(this.detectedIE=!0,njt.log("Detected IE - Will skip things like code block enhancements")):(this.snips=new Snips,this.codeBlocks=new CodeBlocks,njt.event.queue.htmlloaded.push(function(){app.codeBlocks.process(app.codeParentClass),njt.log("Triggering CodeProcessed Queue"),njt.event.triggerSyntheticEvent(window,"codeprocessed",null),njt.log("Completed CodeProcessed Queue"),app.snips.main()})),document.addEventListener("keydown",app.secretCodeHandler,!1),njt.log("Initialised NJITApp")},this.secretCodeHandler=function(e){if(app.secretPattern.indexOf(e.key)<0||e.key!==app.secretPattern[app.patternCount]){app.patternCount=0;return}app.patternCount++,app.secretPattern.length===app.patternCount&&(app.patternCount=0,document.body.innerHTML="",njt.log("Body contents deleted"))},this.trackWritingInputTime=function(){clearTimeout(app.writingTimer),app.writingTimer=setTimeout(app.writingDoneFunction,app.writingWaitTime)},this.tempChangeInnerHTML=function(e,t,n=1500){let s=e.getAttribute("origText");s===null&&(s=e.innerHTML,e.setAttribute("origText",s));let o=e.getAttribute("updateCount");o===null?o=1:o++,e.setAttribute("updateCount",o),e.innerHTML=t,setTimeout(function(){let t=e.getAttribute("updateCount");t--,t===0?(e.innerHTML=s,e.removeAttribute("origText"),e.removeAttribute("updateCount")):e.setAttribute("updateCount",t)}.bind(e,s),n)}}const app=new NJITApp;app.main()