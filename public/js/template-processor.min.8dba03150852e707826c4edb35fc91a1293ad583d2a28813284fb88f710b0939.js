function TemplatePage(){this.writingArea,this.formArea,this.resultArea,this.writingAreaID="writingarea",this.main=function(){document.getElementById(this.writingAreaID)!=null&&(this.initObjects(),this.initPage())},this.initObjects=function(){let e=function(){this.process=function(){app.snips.array=njt.snip.examineString(document.getElementById(templatePage.writingAreaID).value)}},t=function(){this.prepare=function(){let n=document.getElementById(templatePage.writingAreaID),e=document.getElementById("formcontent"),t=app.snips.generateFormArray();e.innerHTML="";for(let n=0;n<t.length;n++){let s=njt.formbuilder.parseElement(t[n]);e.appendChild(s)}for(let e=0;e<app.snips.array.length;e++){let t=app.snips.array[e];typeof njt.snip.valueMap[t]!="undefined"&&(document.getElementById(t+"-input").value=njt.snip.valueMap[t])}}},n=function(){this.copyToClipboard=function(e){var t=document.getElementById("resultarea");t.select(),t.setSelectionRange(0,t.value.length),document.execCommand("copy"),app.tempChangeInnerHTML(e.srcElement,"Copied")},this.generate=function(){let e=document.getElementById(templatePage.writingAreaID).value,t=document.getElementById("resultarea");for(let t=0;t<app.snips.array.length;t++){let e=app.snips.array[t],n=document.getElementById(e+"-input").value;n!=""?njt.snip.valueMapPush(e,n):typeof njt.snip.valueMap[e]!="undefined"&&delete njt.snip.valueMap[e]}t.value=njt.snip.processString(e)}};this.writingArea=new e,this.formArea=new t,this.resultArea=new n},this.initPage=function(){app.writingDoneFunction=()=>{templatePage.updatePage()};let e=document.getElementById(templatePage.writingAreaID);e.addEventListener("keyup",app.trackWritingInputTime),e.addEventListener("paste",app.trackWritingInputTime),document.getElementById("writingbutton").onclick=function(e){if(njt.log("Start processing writing area"),templatePage.updatePage(),e.shiftKey){let e=document.getElementById("sniplist");e.innerHTML=app.snips.array,e.style.display="block"}njt.log("End processing writing area")},document.getElementById("formbutton").onclick=function(e){if(njt.log("Start processing form area"),templatePage.resultArea.generate(),e.shiftKey){let e=document.getElementById("snipmap");e.innerHTML=JSON.stringify(njt.snip.valueMap),e.style.display="block"}njt.log("End processing form area")},document.getElementById("formcopybutton").onclick=function(e){if(njt.log("Start processing form area and copying result"),templatePage.resultArea.generate(),e.shiftKey){let e=document.getElementById("snipmap");e.innerHTML=JSON.stringify(njt.snip.valueMap),e.style.display="block"}templatePage.resultArea.copyToClipboard(e),njt.log("End processing form area and copying result")},document.getElementById("copybutton").onclick=function(e){njt.log("Start copying result"),templatePage.resultArea.copyToClipboard(e),njt.log("End copying result")},templatePage.updatePage()},this.updatePage=function(){this.writingArea.process(),this.formArea.prepare()}}const templatePage=new TemplatePage;templatePage.main()