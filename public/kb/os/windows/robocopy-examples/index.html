<!DOCTYPE html>
<html lang="en-AU">
	<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width">
<title>Robocopy examples | NJIT.io</title>
<meta name="description" content="In the case of having to install legacy .NET versions but the Windows Feature GUI is throwing an error try this.">
<meta name="author" content="Nathan Jackson" />

<meta property="og:url" content="https://njit.io/kb/os/windows/robocopy-examples/">
  <meta property="og:site_name" content="NJIT.io">
  <meta property="og:title" content="Robocopy examples">
  <meta property="og:description" content="In the case of having to install legacy .NET versions but the Windows Feature GUI is throwing an error try this.">
  <meta property="og:locale" content="en_us">
  <meta property="og:type" content="article">
    <meta property="article:section" content="kb">
    <meta property="article:published_time" content="2021-02-21T00:00:00+00:00">
    <meta property="article:modified_time" content="2021-02-21T00:00:00+00:00">
    <meta property="article:tag" content="Os">
    <meta property="article:tag" content="Windows">
    <meta property="article:tag" content="Robocopy">


  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Robocopy examples">
  <meta name="twitter:description" content="In the case of having to install legacy .NET versions but the Windows Feature GUI is throwing an error try this.">


  <meta itemprop="name" content="Robocopy examples">
  <meta itemprop="description" content="In the case of having to install legacy .NET versions but the Windows Feature GUI is throwing an error try this.">
  <meta itemprop="datePublished" content="2021-02-21T00:00:00+00:00">
  <meta itemprop="dateModified" content="2021-02-21T00:00:00+00:00">
  <meta itemprop="wordCount" content="308">
  <meta itemprop="keywords" content="Os,Windows,Robocopy">



<link rel="stylesheet" href="/css/style.min.5d235ac77916f2633549bc93f2d3b3ebc8a18526120c24aa1b5eea69d774319c.css" integrity="sha256-XSNax3kW8mM1SbyT8tOz68ihhSYSDCSqG17qadd0MZw=" crossorigin="anonymous">




<script src="/js/njtools-core.min.d66c683e82dea546f573082174c16a45e4b048368c6926a0560075ebaf57fdb5.js"></script>

<script src="/js/njtools-extensions.min.c5f88e86686dd1dd8b2e5502808bc834de9924434d6797735633d81f0579329a.js" async></script>

<script src="/js/site.min.771b87541caf831e155af94af7901abc37e18f1ef3ef13bc973eadf7d31625d2.js" async></script>

<script>
    njt.log('Created CodeProcessed Queue');
    njt.event.createQueue('codeprocessed', window, 'codeprocessed');
</script>

<style>
     
    #njitio-logo-lightmode { display: inline; }
    #njitio-logo-darkmode { display: none; }

    @media (prefers-color-scheme: dark) {
        #njitio-logo-lightmode { display: none; }
        #njitio-logo-darkmode { display: inline; }
    }
</style>

	</head>
	<body>
		<header>

<div id="nav-body-blck" class="body-blck">
	<div class="body-cont">
		<div class="gd-cont">
			<div class="gd-m12">
			<nav>
				<input type="checkbox" class="main-nav-toggle" id="main-nav-toggle" />
				<label id="main-nav-toggle-label" for="main-nav-toggle" class="main-nav-toggle-label"><span id="nav-menu-icon">&#9776;</span> Menu</label>
				<ul class="rnav main-nav-root">

			<li class="main-nav-item">
			<a href="/">Home</a>
			</li>
			<li class="main-nav-item">
			<a href="/about-me/">About me</a>
			</li>

			<li class="main-nav-parent">                            
			<input type="checkbox" class="main-nav-toggle" id="main-nav-toggle1" />
			<label class="main-nav-label" for="main-nav-toggle1">Projects<span class="main-nav-level" aria-hidden="true"> +</span></label>
			<ul class="main-nav-child">

			<li class="main-nav-item">
			<a href="/structure-css/">Structure.CSS</a>
			</li>
			<li class="main-nav-item">
			<a href="/njtools-js/">NJTools.JS</a>
			</li>
			<li class="main-nav-item">
			<a href="/networkenjin/">NetworkEnjin</a>
			</li>
			</ul>
			</li>

			<li class="main-nav-parent">                            
			<input type="checkbox" class="main-nav-toggle" id="main-nav-toggle2" />
			<label class="main-nav-label" for="main-nav-toggle2">Tools<span class="main-nav-level" aria-hidden="true"> +</span></label>
			<ul class="main-nav-child">

			<li class="main-nav-item">
			<a href="/password-generator/">Password Generator</a>
			</li>
			<li class="main-nav-item">
			<a href="/template-processor/">Template Processor</a>
			</li>
			<li class="main-nav-item">
			<a href="/message-composer/">Message Composer</a>
			</li>
			<li class="main-nav-item">
			<a href="/iperf-3-for-windows/">Iperf 3 for Windows</a>
			</li>
			</ul>
			</li>
			<li class="main-nav-item">
			<a aria-current="true" class="main-nav-ancestor" href="/kb/">Knowledge-base</a>
			</li>

			<li class="main-nav-parent">                            
			<input type="checkbox" class="main-nav-toggle" id="main-nav-toggle3" />
			<label class="main-nav-label" for="main-nav-toggle3">External Links<span class="main-nav-level" aria-hidden="true"> +</span></label>
			<ul class="main-nav-child">

			<li class="main-nav-item">
			<a href="https://learn.microsoft.com/en-us/compliance/anz/e8-overview">Microsoft Docs on ACSC Essential Eight</a>
			</li>
			<li class="main-nav-item">
			<a href="https://desktop.gov.au/blueprint/overview">AU Government’s Protected Utility blueprint</a>
			</li>
			</ul>
			</li>
				</ul>
			</nav>
			</div>
		</div>
	</div>
</div>
<div id="header-body-blck" class="body-blck">
    <div id="header-body-cont" class="body-cont content-container">
        <div class="gd-cont">
            <div class="gd-s12">
                <div id="header-contents">
                    <a href="/" id="header-link" rel="home">
                        <img width="220" height="48" src="/images/NJIT-logo-220x48-1-lightmode.png" class="njitio-logo" id="njitio-logo-lightmode" alt="NJIT.io" decoding="async" fetchpriority="high">
                        <img width="220" height="48" src="/images/NJIT-logo-220x48-1-darkmode.png" class="njitio-logo" id="njitio-logo-darkmode" alt="NJIT.io" decoding="async" fetchpriority="high">
                    </a>
                </div>
            </div>
        </div>
    </div>
</div>
		</header>
		<main>

<div class="body-blck">
	<div class="body-cont content-container">
		<div class="gd-cont" id="content-grid">



<div class="gd-s12">
	<h1 id="page-heading">Robocopy examples</h1>
</div>
<div id="page-headingbuttons" class="hide"></div>


			<div class="gd-s12">
<p>Sync target with source (will delete files in target)</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>robocopy &#34;{:Source:}&#34; &#34;{:Target:}&#34; /mir /copy:{:CopyFlags:} /r:{:RetryCount:} /w:{:WaitTime:}
</span></span></code></pre></div><p>Sync target with source (will delete files in target) and log the results</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>robocopy &#34;{:Source:}&#34; &#34;{:Target:}&#34; /mir /copy:{:CopyFlags:} /r:{:RetryCount:} /w:{:WaitTime:} /tee /np &#34;/{:LoggingMode:}:{:LogFileFullPath:}&#34;
</span></span></code></pre></div><h2 id="common-configuration-switches">Common configuration switches</h2>
<table>
  <thead>
      <tr>
          <th style="text-align: left">Switch</th>
          <th style="text-align: left">Description</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td style="text-align: left">/S</td>
          <td style="text-align: left">Copy subdirectories</td>
      </tr>
      <tr>
          <td style="text-align: left">/E</td>
          <td style="text-align: left">Copy subdirectories (including empty ones)</td>
      </tr>
      <tr>
          <td style="text-align: left">/MIR</td>
          <td style="text-align: left">Mirror directory tree (delete files/folders from target that no longer exist in source)</td>
      </tr>
      <tr>
          <td style="text-align: left">/Z</td>
          <td style="text-align: left">Copy files in restartable mode</td>
      </tr>
      <tr>
          <td style="text-align: left">/ZB</td>
          <td style="text-align: left">Copy files in restartable mode but fail back to backup mode if access denied</td>
      </tr>
      <tr>
          <td style="text-align: left">/R:{:RetryCount:}</td>
          <td style="text-align: left">Retry {:RetryCount:} times (default is 1000000)</td>
      </tr>
      <tr>
          <td style="text-align: left">/W:{:WaitTime:}</td>
          <td style="text-align: left">Wait {:WaitTime:} seconds between retries (default is 30 seconds)</td>
      </tr>
      <tr>
          <td style="text-align: left">/TBD</td>
          <td style="text-align: left">Wait for share names to be defined (for retry error 67)</td>
      </tr>
      <tr>
          <td style="text-align: left">/NP</td>
          <td style="text-align: left">No progress to be displayed for file copies</td>
      </tr>
      <tr>
          <td style="text-align: left">/V</td>
          <td style="text-align: left">Verbose output (including skipped files)</td>
      </tr>
      <tr>
          <td style="text-align: left">/TEE</td>
          <td style="text-align: left">Output to console as well as output as well as log file</td>
      </tr>
      <tr>
          <td style="text-align: left">/XF “{:ExcludeFiles:}”</td>
          <td style="text-align: left">Exclude files matching {:ExcludeFiles:} (can use * wildcard)</td>
      </tr>
      <tr>
          <td style="text-align: left">/XD “{:ExcludeDirs:}”</td>
          <td style="text-align: left">Exclude directories matching {:ExcludeDirs:} (can use * wildcard)</td>
      </tr>
      <tr>
          <td style="text-align: left">/LOG:{:LogFileFullPath:}</td>
          <td style="text-align: left">Output results to log file (be sure to properly escape whitespace when using this)</td>
      </tr>
      <tr>
          <td style="text-align: left">/LOG+:{:LogFileFullPath:}</td>
          <td style="text-align: left">Append results to log file (be sure to properly escape whitespace when using this)</td>
      </tr>
      <tr>
          <td style="text-align: left">/UNILOG:{:LogFileFullPath:}</td>
          <td style="text-align: left">Output results to log file (be sure to properly escape whitespace when using this)</td>
      </tr>
      <tr>
          <td style="text-align: left">/UNILOG+:{:LogFileFullPath:}</td>
          <td style="text-align: left">Append results to log file (be sure to properly escape whitespace when using this)</td>
      </tr>
  </tbody>
</table>
<p>For a more complete reference I recommend: <a href="https://ss64.com/nt/robocopy.html">https://ss64.com/nt/robocopy.html</a></p>
<h2 id="regex-search-for-errors-in-output-log">Regex search for errors in output log</h2>
<p>If you would like to search your output log for errors I have used the below regex (tested in Notepad++):</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>ERROR \d+ \(0x\d+\)
</span></span></code></pre></div><h2 id="unicode-file-notes">Unicode file notes</h2>
<p>When using Unicode logging on some older systems the output file may appear to be gibberish. The PoweShell fix I have used for this (<a href="https://superuser.com/a/897487">source here</a>) is:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>$bytes = [System.IO.File]::ReadAllBytes(&#39;C:\Temp\RoboCopy.log&#39;)
</span></span><span style="display:flex;"><span>$len = $bytes.Length
</span></span><span style="display:flex;"><span>$text = [System.Text.Encoding]::ASCII.GetString($bytes,2,$len -2)
</span></span><span style="display:flex;"><span>$text | Out-File -FilePath &#39;C:\Temp\RoboCopyFixed.log&#39;
</span></span></code></pre></div>
			</div>
		</div>
	</div>
</div>



<div class="body-blck">
  <div class="body-cont">
    <div class="gd-cont">
  <div class="gd-s12">
    <div><p>Tags:&nbsp;<a href="/tags/os/" class="no-caps">#Os</a>&nbsp;<a href="/tags/windows/" class="no-caps">#Windows</a>&nbsp;<a href="/tags/robocopy/" class="no-caps">#Robocopy</a>&nbsp;</p></div>
  </div>

    </div>
  </div>
</div>




<script>
document.querySelectorAll('table').forEach(function(table) {
    table.classList.add('njit-code-block');
});

njt.event.queue['codeprocessed'].push(function(){
	app.snips.addVariable("source", { "i":1, "h":"Source folder", "p":"D:\\Documents", "c":"gd-s12" });
	app.snips.addVariable("target", { "i":1, "h":"Target folder", "p":"E:\\DocumentBackups", "c":"gd-s12" });
	
	app.snips.addVariable("retrycount", { "i":1, "h":"Retry count", "p":"1", "c":"gd-m4" });
	app.snips.addVariable("waittime", { "i":1, "h":"Wait time between retries (in seconds)", "p":"1", "c":"gd-m4" });
	app.snips.addVariable("copyflags", { "i":3, "h":"File security", "a": [
			{"v":"datso", "h":"Copy file permissions"},
			{"v":"dt", "h":"Skip file permissions"}
		], "c":"gd-m4" });

	app.snips.addVariable("loggingmode", { "i":3, "h":"Logging Mode (see notes if using Unicode)", "a": [
			{"v":"log", "h":"Log to file (overwrite)"},
			{"v":"log+", "h":"Log to file (append)"},
			{"v":"unilog", "h":"Log to unicode file (overwrite)"},
			{"v":"unilog+", "h":"Log to unicode file (append)"}
		], "c":"gd-m6" });
	app.snips.addVariable("logfilefullpath", { "i":1, "h":"Full path of file to output log to", "p":"c:\\temp\\robocopy.log", "c":"gd-m6" });

	app.snips.addVariable("excludefiles", { "i":1, "h":"File names and file paths to exclude (can use * wildcard)", "p":"*.key", "c":"gd-m6" });
	app.snips.addVariable("excludedirs", { "i":1, "h":"Folder names and Folder paths to exclude (can use * wildcard)", "p":"secrets", "c":"gd-m6" });
});
</script>


		</main>
		<footer>
<div id="footer-body-blck" class="body-blck">
    <div id="footer-body-cont" class="body-cont">
        <div class="gd-cont">
            <div class="gd-s12 align-center" id="footer-contents">
                <p>Copyright © 2024<br><a href="/license/" class="light-text">License</a> & <a href="/attributions/" class="light-text">Attributions</a></p>
            </div>
        </div>
    </div>
</div>



		</footer>
	</body>
</html>